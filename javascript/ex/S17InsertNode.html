<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title>노드 수정 및 삽입</title>
    <link rel="stylesheet" href="/src/css/study.css">
</head>
<body>
    <h1>노드 수정 및 삽입</h1>
    <section>
        <h2>1. innerHTML 방식</h2>
        <ul>
            <li><code>element.innerHTML = "&lt;div&gt;추가&lt;/div&gt;"</code> : 문자열을 HTML로 해석하여 자식 전체를 교체</li>
            <li><code>element.innerHTML += "..."</code> : 기존 내용 뒤에 새로운 HTML을 추가</li>
            <li>장점: 빠르고 간단하게 여러 요소를 한 번에 삽입 가능</li>
            <li>단점: DOM 전체를 다시 해석하므로 성능 저하, 기존 이벤트 핸들러가 사라질 수 있음</li>
        </ul>
    </section>

    <section>
        <h2>2. DOM 메서드 방식</h2>
        <ul>
            <li><code>document.createElement("div")</code> : 요소 노드 생성</li>
            <li><code>document.createTextNode("텍스트")</code> : 텍스트 노드 생성</li>
            <li><code>parent.appendChild(node)</code> : 부모의 맨 뒤에 추가</li>
            <li>장점: 이벤트 핸들러 유지, 보안에 안전</li>
            <li>단점: 코드가 다소 길어짐</li>
        </ul>
    </section>

    <section>
        <h2>3. 삽입 위치 지정 (최신 메서드)</h2>
        <ul>
            <li><code>append(...nodes)</code> : 부모의 맨 뒤에 삽입</li>
            <li><code>prepend(...nodes)</code> : 부모의 맨 앞에 삽입</li>
            <li><code>before(...nodes)</code> : 대상 요소 앞에 삽입</li>
            <li><code>after(...nodes)</code> : 대상 요소 뒤에 삽입</li>
            <li><code>replaceWith(...nodes)</code> : 대상 요소 교체</li>
            <li><code>remove()</code> : 요소 제거</li>
        </ul>
        <style>
            .container {
                border: 2px solid #333;
                padding: 1em;
                margin-top: 1em;
                width: 320px;
            }
            .item {
                background: lightblue;
                margin: 0.3em 0;
                padding: 0.5em;
                border-radius: 4px;
            }
            button {
                margin: 0.2em;
            }
        </style>
        <h2>3. 삽입 위치 지정 (최신 메서드)</h2>
        <p>버튼을 눌러 각 메서드의 동작을 확인하세요.</p>

        <div>
            <button id="btnAppend">append()</button>
            <button id="btnPrepend">prepend()</button>
            <button id="btnBefore">before()</button>
            <button id="btnAfter">after()</button>
            <button id="btnReplace">replaceWith()</button>
            <button id="btnRemove">remove()</button>
        </div>

        <div id="container" class="container">
            <div class="item target">기준 아이템(Target)</div>
        </div>

        <script>
            const container = document.querySelector("#container");
            const target = container.querySelector(".target");

            // 새 아이템 만드는 함수
            const makeItem = (text) => {
                const div = document.createElement("div");
                div.className = "item";
                div.textContent = text;
                return div;
            };

            document.querySelector("#btnAppend").onclick = () => {
                container.append(makeItem("append로 추가된 아이템"));
            };

            document.querySelector("#btnPrepend").onclick = () => {
                container.prepend(makeItem("prepend로 추가된 아이템"));
            };

            document.querySelector("#btnBefore").onclick = () => {
                target.before(makeItem("before로 추가된 아이템"));
            };

            document.querySelector("#btnAfter").onclick = () => {
                target.after(makeItem("after로 추가된 아이템"));
            };

            document.querySelector("#btnReplace").onclick = () => {
                target.replaceWith(makeItem("replaceWith로 교체된 아이템"));
            };

            document.querySelector("#btnRemove").onclick = () => {
                target.remove();
            };
        </script>

    </section>

    <section>
        <h2>4. 전통적 메서드 vs 최신 메서드</h2>
        <ul>
            <li><code>appendChild(node)</code> ≈ <code>append(...nodes)</code></li>
            <li><code>insertBefore(new, ref)</code> ≈ <code>before(...nodes)</code>, <code>prepend(...nodes)</code></li>
            <li><code>replaceChild(new, old)</code> ≈ <code>replaceWith(...nodes)</code></li>
            <li><code>removeChild(node)</code> ≈ <code>remove()</code></li>
            <li>최신 메서드는 문자열도 허용하고, 여러 노드를 동시에 처리 가능</li>
        </ul>
    </section>

    <section>
        <h2>5. insertAdjacentHTML / insertAdjacentText</h2>
        <ul>
            <li><code>elem.insertAdjacentHTML("beforebegin", "&lt;div&gt;...&lt;/div&gt;")</code></li>
            <li>위치 옵션: beforebegin, afterbegin, beforeend, afterend</li>
            <li>innerHTML보다 부분 삽입에 적합, 기존 노드를 유지</li>
            <li><code>insertAdjacentText</code> : HTML 해석 없이 텍스트 그대로 삽입</li>
        </ul>
        <h2>insertAdjacentHTML / insertAdjacentText 실습</h2>
        <p>버튼을 눌러 각 위치 옵션과 차이를 확인하세요.</p>

        <div>
            <button onclick="addHTML('beforebegin')">beforebegin</button>
            <button onclick="addHTML('afterbegin')">afterbegin</button>
            <button onclick="addHTML('beforeend')">beforeend</button>
            <button onclick="addHTML('afterend')">afterend</button>
            <button onclick="addText('beforeend')">insertAdjacentText</button>
        </div>

        <div id="container2" class="container">
            <div class="target item">기준 아이템(Target)</div>
        </div>

        <script>
            const target2 = document.querySelector("#container2 .target");

            function addHTML(position) {
                target2.insertAdjacentHTML(position, `<div class="item" ">
        HTML(${position})
      </div>`);
            }

            function addText(position) {
                target2.insertAdjacentText(position, "<b>Text 그대로</b>");
            }
        </script>

    </section>

    <section>
        <h2>6. 대량 삽입 최적화</h2>
        <ul>
            <li><code>node.cloneNode(true)</code> : 노드 복제 (true = 자식 포함)</li>
            <li><code>DocumentFragment</code> : 여러 노드를 임시로 모아 한 번에 삽입 → 성능 최적화</li>
        </ul>
    </section>
</body>
</html>